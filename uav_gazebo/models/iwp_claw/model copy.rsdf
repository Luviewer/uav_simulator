<?xml version="1.0" ?>
  <%
  claw_base_dx = 0.0 
  claw_base_dy = 0.0 
  claw_base_dz = 0.0

  # inertia
  claw_base_mass = 0.087
  claw_base_ixx  = 660e-6
  claw_base_iyy  = 660e-6
  claw_base_izz  = 88e-6

  claw_pole_left_0_x = -0.080999
  claw_pole_left_0_y = -0.027
  claw_pole_left_0_z = claw_base_dz - 0.046216
  claw_pole_left_0_rad = Math::PI/180*35.03

  claw_pole_left_1_x = -0.055999
  claw_pole_left_1_y = -0.027
  claw_pole_left_1_z = claw_base_dz - 0.046216
  claw_pole_left_1_rad = Math::PI/180*35.03

  claw_pole_left_2_x = -0.080999
  claw_pole_left_2_y = 0.027
  claw_pole_left_2_z = claw_base_dz - 0.046216
  claw_pole_left_2_rad = Math::PI/180*35.03

  claw_pole_left_3_x = -0.055999
  claw_pole_left_3_y = 0.027
  claw_pole_left_3_z = claw_base_dz - 0.046216
  claw_pole_left_3_rad = Math::PI/180*35.03

  claw_pole_right_0_x = 0.080999
  claw_pole_right_0_y = -0.027
  claw_pole_right_0_z = claw_base_dz - 0.046216
  claw_pole_right_0_rad = -Math::PI/180*35.03

  claw_pole_right_1_x = 0.055999
  claw_pole_right_1_y = -0.027
  claw_pole_right_1_z = claw_base_dz - 0.046216
  claw_pole_right_1_rad = -Math::PI/180*35.03

  claw_pole_right_2_x = 0.080999
  claw_pole_right_2_y = 0.027
  claw_pole_right_2_z = claw_base_dz - 0.046216
  claw_pole_right_2_rad = -Math::PI/180*35.03

  claw_pole_right_3_x = 0.055999
  claw_pole_right_3_y = 0.027
  claw_pole_right_3_z = claw_base_dz - 0.046216
  claw_pole_right_3_rad = -Math::PI/180*35.03

  # inertia
  claw_pole_mass = 0.008

  claw_pole_ixx  = 10e-6
  claw_pole_iyy  = 3e-6
  claw_pole_izz  = 10e-6

  claw_pole_limit_up = Math::PI/2
  claw_pole_limit_down = -Math::PI/180*90

  claw_pole_pos = {
    "claw_left_pole_0" => {:x0 => claw_pole_left_0_x, :y0 => claw_pole_left_0_y, :z0 => claw_pole_left_0_z, :rad => claw_pole_left_0_rad},                                                                      
    "claw_left_pole_1" => {:x0 => claw_pole_left_1_x, :y0 => claw_pole_left_1_y, :z0 => claw_pole_left_1_z, :rad => claw_pole_left_1_rad},
    "claw_left_pole_2" => {:x0 => claw_pole_left_2_x, :y0 => claw_pole_left_2_y, :z0 => claw_pole_left_2_z, :rad => claw_pole_left_2_rad},
    "claw_left_pole_3" => {:x0 => claw_pole_left_3_x, :y0 => claw_pole_left_3_y, :z0 => claw_pole_left_3_z, :rad => claw_pole_left_3_rad},

    "claw_right_pole_0" => {:x0 => claw_pole_right_0_x, :y0 => claw_pole_right_0_y, :z0 => claw_pole_right_0_z, :rad => claw_pole_right_0_rad},
    "claw_right_pole_1" => {:x0 => claw_pole_right_1_x, :y0 => claw_pole_right_1_y, :z0 => claw_pole_right_1_z, :rad => claw_pole_right_1_rad},
    "claw_right_pole_2" => {:x0 => claw_pole_right_2_x, :y0 => claw_pole_right_2_y, :z0 => claw_pole_right_2_z, :rad => claw_pole_right_2_rad},
    "claw_right_pole_3" => {:x0 => claw_pole_right_3_x, :y0 => claw_pole_right_3_y, :z0 => claw_pole_right_3_z, :rad => claw_pole_right_3_rad},
  }

  #-------------------------------------------------------------------------------------------------------------------------#
  claw_hand_mass = 0.028

  claw_hand_ixx  = 32e-6
  claw_hand_iyy  = 4e-6
  claw_hand_izz  = 32e-6

  claw_hand_left_0_x = -0.101185
  claw_hand_left_0_y = -0.024
  claw_hand_left_0_z = claw_base_dz - 0.129357
  claw_hand_left_0_rad = 0

  claw_hand_left_1_x = -0.101185
  claw_hand_left_1_y = 0.024
  claw_hand_left_1_z = claw_base_dz - 0.129357
  claw_hand_left_1_rad = 0

  claw_hand_right_0_x = 0.101185
  claw_hand_right_0_y = -0.024
  claw_hand_right_0_z = claw_base_dz - 0.129357
  claw_hand_right_0_rad = Math::PI

  claw_hand_right_1_x = 0.101185
  claw_hand_right_1_y = 0.024
  claw_hand_right_1_z = claw_base_dz - 0.129357
  claw_hand_right_1_rad = Math::PI

  claw_hand_limit_up = Math::PI/2
  claw_hand_limit_down = -Math::PI/2

  claw_hand_pos = {
    "claw_hand_left_0" => {:x0 => claw_hand_left_0_x, :y0 => claw_hand_left_0_y, :z0 => claw_hand_left_0_z, :rad => claw_hand_left_0_rad, :parent => "claw_left_pole_0", :child =>"claw_left_pole_1"},
    "claw_hand_left_1" => {:x0 => claw_hand_left_1_x, :y0 => claw_hand_left_1_y, :z0 => claw_hand_left_1_z, :rad => claw_hand_left_1_rad, :parent => "claw_left_pole_2", :child =>"claw_left_pole_3"},

    "claw_hand_right_0" => {:x0 => claw_hand_right_0_x, :y0 => claw_hand_right_0_y, :z0 => claw_hand_right_0_z, :rad => claw_hand_right_0_rad, :parent => "claw_right_pole_0", :child =>"claw_right_pole_1"},
    "claw_hand_right_1" => {:x0 => claw_hand_right_1_x, :y0 => claw_hand_right_1_y, :z0 => claw_hand_right_1_z, :rad => claw_hand_right_1_rad, :parent => "claw_right_pole_2", :child =>"claw_right_pole_3"},
  }
  #-------------------------------------------------------------------------------------------------------------------------#
  claw_motor_mass = 0.145

  claw_motor_ixx  = 50e-6
  claw_motor_iyy  = 50e-6
  claw_motor_izz  = 15e-6

  claw_motor_z = claw_base_dz + 0.029

  #-------------------------------------------------------------------------------------------------------------------------#
  claw_flange_z = claw_base_dz - 0.045

  #-------------------------------------------------------------------------------------------------------------------------#
  claw_tie_mass = 0.004

  claw_tie_ixx  = 5e-6
  claw_tie_iyy  = 1e-6
  claw_tie_izz  = 5e-6

  claw_tie_left_0_x = -0.034
  claw_tie_left_0_y = -0.03
  claw_tie_left_0_z = claw_base_dz - 0.046108
  claw_tie_left_0_rad = Math::PI/180*90

  claw_tie_left_1_x = -0.034
  claw_tie_left_1_y = 0.03
  claw_tie_left_1_z = claw_base_dz - 0.046108
  claw_tie_left_1_rad = Math::PI/180*90

  claw_tie_right_0_x = 0.034
  claw_tie_right_0_y = -0.03
  claw_tie_right_0_z = claw_base_dz - 0.046108
  claw_tie_right_0_rad = -Math::PI/180*90

  claw_tie_right_1_x = 0.034
  claw_tie_right_1_y = 0.03
  claw_tie_right_1_z = claw_base_dz - 0.046108
  claw_tie_right_1_rad = -Math::PI/180*90

  claw_tie_pos ={
    "claw_tie_left_0" => {:x0 => claw_tie_left_0_x, :y0 => claw_tie_left_0_y, :z0 => claw_tie_left_0_z, :rad => claw_tie_left_0_rad, :parent => "claw_left_pole_1"},
    "claw_tie_left_1" => {:x0 => claw_tie_left_1_x, :y0 => claw_tie_left_1_y, :z0 => claw_tie_left_1_z, :rad => claw_tie_left_1_rad, :parent => "claw_left_pole_1"},

    "claw_tie_right_0" => {:x0 => claw_tie_right_0_x, :y0 => claw_tie_right_0_y, :z0 => claw_tie_right_0_z, :rad => claw_tie_right_0_rad, :parent => "claw_right_pole_1"},
    "claw_tie_right_1" => {:x0 => claw_tie_right_1_x, :y0 => claw_tie_right_1_y, :z0 => claw_tie_right_1_z, :rad => claw_tie_right_1_rad, :parent => "claw_right_pole_1"},
  }

%>
  <sdf version="1.5">
    <model name="arduwoodpecker_claw">
      <link name="claw_base">
      <%# <static>true</static> %>
      <pose>0 0 <%= claw_base_dz %>  0 0 0</pose>
      <inertial>
        <pose>0 0 0 0 0 0</pose>
        <mass><%= claw_base_mass %></mass>
        <inertia>
          <ixx><%= claw_base_ixx %></ixx>
          <iyy><%= claw_base_iyy %></iyy>
          <izz><%= claw_base_izz %></izz>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyz>0</iyz>
        </inertia>
      </inertial>
      <collision name="claw_base_collision">
        <geometry>
          <mesh>
            <uri>model://arduwoodpecker_claw/meshes/claw_base.STL</uri>
          </mesh>
        </geometry>
      </collision>
      <visual name="claw_base_visual">
        <geometry>
          <mesh>
            <uri>model://arduwoodpecker_claw/meshes/claw_base.STL</uri>
          </mesh>
        </geometry>
        <material>
          <script>
            <name>Gazebo/Grey</name>
          </script>
        </material>
      </visual>
    </link>
    <%# ----------------------------------------------------------- %>
    <%
      claw_pole_pos.keys.each do |k|
        x0 = claw_pole_pos[k][:x0]
        y0 = claw_pole_pos[k][:y0]
        z0 = claw_pole_pos[k][:z0]
        rad = claw_pole_pos[k][:rad]
    %>
    <%= "<link name=" + '"' + k + '"' + '>' %>
    <pose><%= x0 %> <%= y0 %> <%= z0 %> 0 <%= rad %> 0</pose>
    <inertial>
      <pose>0 0 0 0 0 0</pose>
      <mass><%= claw_pole_mass %></mass>
      <inertia>
        <ixx><%= claw_pole_ixx %></ixx>
        <iyy><%= claw_pole_iyy %></iyy>
        <izz><%= claw_pole_izz %></izz>
        <ixy>0</ixy>
        <ixz>0</ixz>
        <iyz>0</iyz>
      </inertia>
    </inertial>
    <%= "<collision name=" + '"' + k + "_collision" + '"' + '>' %>
    <geometry>
      <mesh>
        <uri>model://arduwoodpecker_claw/meshes/claw_pole.STL</uri>
      </mesh>
    </geometry>
  </collision>
  <%= "<visual name=" + '"' + k + "_visual" + '"' + '>' %>
  <geometry>
    <mesh>
      <uri>model://arduwoodpecker_claw/meshes/claw_pole.STL</uri>
    </mesh>
  </geometry>
</visual>
</link>
<%= "<joint name=" + '"' + k + '_spin" type="revolute">' %>
<parent>claw_base</parent>
<%= "<child>" + k + "</child>" %>
<pose>0 0 0.054 0 0 0</pose>
<axis>
  <xyz>0 1 0</xyz>
  <limit>
    <lower><%= claw_pole_limit_down %></lower>
    <upper><%= claw_pole_limit_up %></upper>
  </limit>
</axis>
</joint>
<% end %>
<%# ----------------------------------------------------------- %>
<%
  claw_hand_pos.keys.each do |k|
    x0 = claw_hand_pos[k][:x0]
    y0 = claw_hand_pos[k][:y0]
    z0 = claw_hand_pos[k][:z0]
    rad = claw_hand_pos[k][:rad]
    parent = claw_hand_pos[k][:parent]
    child = claw_hand_pos[k][:child]
    %>
<%= "<link name=" + '"' + k + '"' + '>' %>
<pose><%= x0 %> <%= y0 %> <%= z0 %> 0 0 <%= rad %></pose>
<inertial>
  <pose>0 0 0 0 0 0</pose>
  <mass><%= claw_hand_mass %></mass>
  <inertia>
    <ixx><%= claw_hand_ixx %></ixx>
    <iyy><%= claw_hand_iyy %></iyy>
    <izz><%= claw_hand_izz %></izz>
    <ixy>0</ixy>
    <ixz>0</ixz>
    <iyz>0</iyz>
  </inertia>
</inertial>
<%= "<collision name=" + '"' + k + "_collision" + '"' + '>' %>
<geometry>
  <mesh>
    <uri>model://arduwoodpecker_claw/meshes/claw_hand.STL</uri>
  </mesh>
</geometry>
</collision>
<%= "<visual name=" + '"' + k + "_visual" + '"' + '>' %>
<geometry>
  <mesh>
    <uri>model://arduwoodpecker_claw/meshes/claw_hand.STL</uri>
  </mesh>
</geometry>
</visual>
</link>
<%= "<joint name=" + '"' + k + '_spin" type="revolute">' %>
<parent><%= parent %></parent>
<%= "<child>" + k + "</child>" %>
<pose>-0.010813 0 0.038925 0 0 0</pose>
<axis>
  <xyz>0 1 0</xyz>
  <limit>
    <lower><%= claw_hand_limit_down %></lower>
    <upper><%= claw_hand_limit_up %></upper>
  </limit>
</axis>
</joint>
<%= "<joint name=" + '"' + k + '_2_spin" type="revolute">' %>
<parent><%= child %></parent>
<%= "<child>" + k + "</child>" %>
<pose>0.014187 0 0.038925 0 0 0</pose>
<axis>
  <xyz>0 1 0</xyz>
  <limit>
    <lower><%= claw_hand_limit_down %></lower>
    <upper><%= claw_hand_limit_up %></upper>
  </limit>
</axis>
</joint>
<% end %>
<joint name="claw_hand_left_1_joint" type="fixed">
  <parent>claw_hand_left_0</parent>
  <child>claw_hand_left_1</child>
  <pose>0.0 0 0.0 0 0 0</pose>
</joint>
<joint name="claw_hand_right_1_joint" type="fixed">
  <parent>claw_hand_right_0</parent>
  <child>claw_hand_right_1</child>
  <pose>0.0 0 0.0 0 0 0</pose>
</joint>
<%# ----------------------------------------------------------- %>
<link name="claw_motor">
<pose>0 0 <%= claw_motor_z %> 0 0 <%= Math::PI %></pose>
<inertial>
  <pose>0 0 0 0 0 0</pose>
  <mass><%= claw_motor_mass %></mass>
  <inertia>
    <ixx><%= claw_motor_ixx %></ixx>
    <iyy><%= claw_motor_iyy %></iyy>
    <izz><%= claw_motor_izz %></izz>
    <ixy>0</ixy>
    <ixz>0</ixz>
    <iyz>0</iyz>
  </inertia>
</inertial>
<collision name="claw_motor_collision">
  <geometry>
    <mesh>
      <uri>model://arduwoodpecker_claw/meshes/claw_motor.STL</uri>
    </mesh>
  </geometry>
</collision>
<visual name="claw_motor_visual">
  <geometry>
    <mesh>
      <uri>model://arduwoodpecker_claw/meshes/claw_motor.STL</uri>
    </mesh>
  </geometry>
</visual>
</link>
<joint name="claw_motor_joint" type="fixed">
  <parent>claw_base</parent>
  <child>claw_motor</child>
  <pose>0 0 0.029 0 0 0</pose>
</joint>
<%# ----------------------------------------------------------- %>
<link name="claw_flange">
<pose>0 0 <%= claw_flange_z %> 0 0 <%= Math::PI %></pose>
<inertial>
  <pose>0 0 0 0 0 0</pose>
  <mass><%= claw_pole_mass %></mass>
  <inertia>
    <ixx><%= claw_pole_ixx %></ixx>
    <iyy><%= claw_pole_iyy %></iyy>
    <izz><%= claw_pole_izz %></izz>
    <ixy>0</ixy>
    <ixz>0</ixz>
    <iyz>0</iyz>
  </inertia>
</inertial>
<collision name="claw_flange_collision">
  <geometry>
    <mesh>
      <uri>model://arduwoodpecker_claw/meshes/claw_flange.STL</uri>
    </mesh>
  </geometry>
</collision>
<visual name="claw_flange_visual">
  <geometry>
    <mesh>
      <uri>model://arduwoodpecker_claw/meshes/claw_flange.STL</uri>
    </mesh>
  </geometry>
</visual>
</link>
<joint name="claw_flange_joint" type="prismatic">
  <%# <joint name="claw_flange_joint" type="fixed"> %>
  <parent>claw_base</parent>
  <child>claw_flange</child>
  <pose>0 0 -0.011023 0 0 0</pose>
  <axis>
    <xyz>0 0 1</xyz>
    <limit>
      <lower>0</lower>
      <upper>0.034</upper>
    </limit>
  </axis>
</joint>
<%# ----------------------------------------------------------- %>
<%
  claw_tie_pos.keys.each do |k|
    x0 = claw_tie_pos[k][:x0]
    y0 = claw_tie_pos[k][:y0]
    z0 = claw_tie_pos[k][:z0]
    rad = claw_tie_pos[k][:rad]
    parent = claw_tie_pos[k][:parent]
    %>
<%= "<link name=" + '"' + k + '"' + '>' %>
<pose><%= x0 %> <%= y0 %> <%= z0 %> 0 <%= rad %> 0</pose>
<inertial>
  <pose>0 0 0 0 0 0</pose>
  <mass><%= claw_tie_mass %></mass>
  <inertia>
    <ixx><%= claw_tie_ixx %></ixx>
    <iyy><%= claw_tie_iyy %></iyy>
    <izz><%= claw_tie_izz %></izz>
    <ixy>0</ixy>
    <ixz>0</ixz>
    <iyz>0</iyz>
  </inertia>
</inertial>
<%= "<collision name=" + '"' + k + "_collision" + '"' + '>' %>
<geometry>
  <mesh>
    <uri>model://arduwoodpecker_claw/meshes/claw_tie.STL</uri>
  </mesh>
</geometry>
</collision>
<%= "<visual name=" + '"' + k + "_visual" + '"' + '>' %>
<geometry>
  <mesh>
    <uri>model://arduwoodpecker_claw/meshes/claw_tie.STL</uri>
  </mesh>
</geometry>
</visual>
</link>
<%= "<joint name=" + '"' + k + '_spin" type="revolute">' %>
<parent>claw_flange</parent>
<%= "<child>" + k + "</child>" %>
<pose>0 0 0.022 0 0 0</pose>
<axis>
  <xyz>0 1 0</xyz>
  <limit>
    <lower><%= claw_pole_limit_down %></lower>
    <upper><%= claw_pole_limit_up %></upper>
  </limit>
</axis>
</joint>
<%= "<joint name=" + '"' + k + '_2_spin" type="revolute">' %>
<%= "<parent>" + parent + "</parent>" %>
<%= "<child>" + k + "</child>" %>
<pose>0 0 -0.022 0 0 0</pose>
<axis>
  <xyz>0 1 0</xyz>
  <limit>
    <lower><%= claw_pole_limit_down %></lower>
    <upper><%= claw_pole_limit_up %></upper>
  </limit>
</axis>
</joint>
<% end %>
<%# ----------------------------------------------------------- %>
</model>
</sdf>
